Go in a subdirectory of an example, and then:
. ../compiles.sh branche name_of_cogent_file

branche can be master, dargent, dargentisa (my branch)


--------------------------

Snippset to insert in generated files *_CorresSetup.thy:
(TODO: modify the haskell files in cogent, or in a short-term,
modify compile.sh so that it inserts this snippset)

For branch dargentisa:

instantiation array :: (cogent_C_val, finite) cogent_C_val
begin
  definition val_rel_array_def:
    " val_rel uv (x :: ('a,'b) array) ≡
        (∃(p:: 'a ptr) repr ptrl. uv = (UPtr (ptr_val p) repr ptrl))"
   (* TODO: match ptrl with the array  *)
  definition type_rel_array_def:
    "type_rel typ (_:: ('a,'b) array  itself) ≡ ∃repr ptrl. typ = RPtr repr ptrl ∧ type_rel repr TYPE('a)"
  instance ..
end

For branch dargent:

instantiation array :: (cogent_C_val, finite) cogent_C_val
begin
  definition val_rel_array_def:
    " val_rel uv (x :: ('a,'b) array) ≡
        (∃(p:: 'a ptr) repr . uv = (UPtr (ptr_val p) repr ))"
   (* TODO: match ptrl with the array  *)
  definition type_rel_array_def:
    "type_rel typ (_:: ('a,'b) array  itself) ≡ ∃repr. typ = RPtr repr  ∧ type_rel repr TYPE('a)"
  instance ..
end

